# Simple Bank V2

## 项目概述

Go 银行后端 MVP，使用三层架构 (Handler/Service/Repository)

## 技术栈

| 组件 | 技术 | 用途 |
|------|------|------|
| 语言 | Go 1.21+ | 后端开发 |
| Web 框架 | Gin | REST API |
| ORM | GORM | 数据库操作 |
| 数据库 | PostgreSQL | 数据存储 |
| 认证 | JWT | 用户认证 |
| 配置 | Viper | 环境变量管理 |

## 架构

```
┌─────────────────────────────────────────────────────────────┐
│                        HTTP 请求                             │
└─────────────────────────────────────────────────────────────┘
                              │
                              ▼
┌─────────────────────────────────────────────────────────────┐
│  Handler 层 (internal/handler/)                              │
│  - 接收 HTTP 请求                                            │
│  - 解析请求参数                                              │
│  - 调用 Service                                              │
│  - 返回 HTTP 响应                                            │
└─────────────────────────────────────────────────────────────┘
                              │
                              ▼
┌─────────────────────────────────────────────────────────────┐
│  Service 层 (internal/service/)                              │
│  - 业务逻辑处理                                              │
│  - 数据验证                                                  │
│  - 调用 Repository                                           │
└─────────────────────────────────────────────────────────────┘
                              │
                              ▼
┌─────────────────────────────────────────────────────────────┐
│  Repository 层 (internal/repository/)                        │
│  - 数据库 CRUD 操作                                          │
│  - SQL 查询封装                                              │
└─────────────────────────────────────────────────────────────┘
                              │
                              ▼
┌─────────────────────────────────────────────────────────────┐
│                      PostgreSQL                              │
└─────────────────────────────────────────────────────────────┘
```

## 目录结构

```
simple-bank-v2/
├── cmd/server/           # 应用入口
├── internal/             # 私有代码（不对外暴露）
│   ├── config/           # 配置加载
│   ├── handler/          # HTTP 处理器
│   ├── service/          # 业务逻辑
│   ├── repository/       # 数据访问
│   ├── model/            # GORM 模型
│   ├── dto/              # 请求/响应对象
│   └── errors/           # 错误处理
├── pkg/                  # 可复用的公共包
├── db/migration/         # 数据库迁移文件
└── docs/                 # API 文档
```

## 常用命令

```bash
make server       # 启动服务
make migrateup    # 执行数据库迁移
make migratedown  # 回滚数据库迁移
make swagger      # 生成 API 文档
make lint         # 代码规范检查
```

## API 端点

| 方法 | 路径 | 说明 |
|------|------|------|
| POST | /api/v1/users | 用户注册 |
| POST | /api/v1/users/login | 用户登录 |
| POST | /api/v1/accounts | 创建账户 |
| GET | /api/v1/accounts/:id | 查询账户 |
| GET | /api/v1/accounts | 账户列表 |
| POST | /api/v1/transfers | 转账 |
